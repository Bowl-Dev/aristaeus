import{d as ke,f as Q,s as v,a as j,c as Ce}from"../chunks/BYE4Bk_Q.js";import{A as Pe,aQ as Oe,ap as je,b as qe,aa as Fe,q as re,aR as Ne,p as se,j as a,k as e,i as n,o as M,h as le,g as r,aq as E,a7 as We,ao as fe,f as Ee,s as he,aS as Me}from"../chunks/BVXMhoAh.js";import{t as Qe,e as Ge,i as xe,s as Ie}from"../chunks/BGndgb_h.js";import{b as ne,s as de,c as we,d as Ae}from"../chunks/B-JWGPEH.js";import{a as ve,s as ce}from"../chunks/DeM4m0Xm.js";import{i as ie}from"../chunks/_mXlSa2e.js";function Se(i,t,s,x,f,l){var _=i.__className;if(Pe||_!==s||_===void 0){var d=Qe(s,x,l);(!Pe||d!==i.getAttribute("class"))&&(d==null?i.removeAttribute("class"):i.className=d),i.__className=s}else if(l&&f!==l)for(var g in l){var b=!!l[g];(f==null||b!==!!f[g])&&i.classList.toggle(g,b)}return l}function Be(i,t,s=t){var x=new WeakSet;Oe(i,"input",async f=>{var l=f?i.defaultValue:i.value;if(l=pe(i)?ye(l):l,s(l),re!==null&&x.add(re),await je(),l!==(l=t())){var _=i.selectionStart,d=i.selectionEnd,g=i.value.length;if(i.value=l??"",d!==null){var b=i.value.length;_===d&&d===g&&b>g?(i.selectionStart=b,i.selectionEnd=b):(i.selectionStart=_,i.selectionEnd=Math.min(d,b))}}}),(Pe&&i.defaultValue!==i.value||qe(t)==null&&i.value)&&(s(pe(i)?ye(i.value):i.value),re!==null&&x.add(re)),Fe(()=>{var f=t();if(i===document.activeElement){var l=Ne??re;if(x.has(l))return}pe(i)&&f===ye(i.value)||i.type==="date"&&!f&&!i.value||f!==i.value&&(i.value=f??"")})}function pe(i){var t=i.type;return t==="number"||t==="range"}function ye(i){return i===""?null:+i}var Ke=Q('<button class="remove-btn svelte-jmuh9v" type="button">×</button>'),Re=Q('<div class="card-quantity svelte-jmuh9v"><label class="quantity-label svelte-jmuh9v"> </label> <div class="quantity-controls svelte-jmuh9v"><button class="qty-btn svelte-jmuh9v" type="button" aria-label="Decrease quantity">−</button> <input type="number" min="10" step="10" class="qty-input svelte-jmuh9v"/> <button class="qty-btn svelte-jmuh9v" type="button" aria-label="Increase quantity">+</button></div> <span class="unit svelte-jmuh9v"> </span></div>'),Te=Q('<p class="select-hint svelte-jmuh9v"> </p>'),De=Q('<div role="button" tabindex="0"><div class="card-header svelte-jmuh9v"><h4 class="ingredient-name svelte-jmuh9v"> </h4> <!></div> <div class="card-nutrition svelte-jmuh9v"><div class="nutrition-badge svelte-jmuh9v"><span class="badge-value svelte-jmuh9v"> </span> <span class="badge-label svelte-jmuh9v"> </span></div> <div class="nutrition-badge svelte-jmuh9v"><span class="badge-value svelte-jmuh9v"> </span> <span class="badge-label svelte-jmuh9v"> </span></div></div> <!></div>');function Ve(i,t){se(t,!0);const s=()=>ve(ne,"$_",x),[x,f]=ce();var l=De();let _;l.__click=()=>{t.isSelected||t.onSelect()},l.__keydown=o=>{(o.key==="Enter"||o.key===" ")&&!t.isSelected&&(o.preventDefault(),t.onSelect())};var d=a(l),g=a(d),b=a(g,!0);e(g);var P=n(g,2);{var k=o=>{var u=Ke();u.__click=h=>{h.stopPropagation(),t.onRemove()},M(h=>de(u,"aria-label",h),[()=>s()("ingredientCard.remove",{values:{name:t.ingredientName}})]),j(o,u)};ie(P,o=>{t.isSelected&&o(k)})}e(d);var S=n(d,2),q=a(S),y=a(q),I=a(y,!0);e(y);var w=n(y,2),A=a(w,!0);e(w),e(q);var F=n(q,2),z=a(F),D=a(z);e(z);var p=n(z,2),G=a(p,!0);e(p),e(F),e(S);var T=n(S,2);{var B=o=>{var u=Re();u.__click=R=>R.stopPropagation();var h=a(u),K=a(h,!0);e(h);var L=n(h,2),H=a(L);H.__click=()=>t.onQuantityChange(Math.max(0,t.quantity-10));var N=n(H,2);we(N),N.__input=R=>t.onQuantityChange(Number(R.currentTarget.value));var X=n(N,2);X.__click=()=>t.onQuantityChange(t.quantity+10),e(L);var Y=n(L,2),ae=a(Y,!0);e(Y),e(u),M((R,U)=>{de(h,"for",`qty-${t.ingredient.id??""}`),v(K,R),de(N,"id",`qty-${t.ingredient.id??""}`),Ae(N,t.quantity),v(ae,U)},[()=>s()("ingredientCard.quantity"),()=>s()("ingredientCard.grams")]),j(o,u)},V=o=>{var u=Te(),h=a(u,!0);e(u),M(K=>v(h,K),[()=>s()("ingredientCard.clickToAdd")]),j(o,u)};ie(T,o=>{t.isSelected?o(B):o(V,!1)})}e(l),M((o,u)=>{_=Se(l,1,"ingredient-card svelte-jmuh9v",null,_,{selected:t.isSelected}),v(b,t.ingredientName),v(I,t.ingredient.caloriesPer100g),v(A,o),v(D,`${t.ingredient.proteinGPer100g??""}g`),v(G,u)},[()=>s()("ingredientCard.cal"),()=>s()("ingredientCard.protein")]),j(i,l),le(),f()}ke(["click","keydown","input"]);var Le=Q('<button type="button"><span class="size-name svelte-1ackfwc"> </span> <span class="size-capacity svelte-1ackfwc"> </span></button>'),He=Q('<section class="bowl-size-selection svelte-1ackfwc"><h2 class="svelte-1ackfwc"> </h2> <div class="bowl-sizes svelte-1ackfwc"></div></section>');function Je(i,t){se(t,!0);const s=()=>ve(ne,"$_",x),[x,f]=ce(),l=[{size:250,nameKey:"bowlSize.small"},{size:320,nameKey:"bowlSize.medium"},{size:600,nameKey:"bowlSize.large"}];var _=He(),d=a(_),g=a(d,!0);e(d);var b=n(d,2);Ge(b,21,()=>l,xe,(P,k)=>{let S=()=>r(k).size,q=()=>r(k).nameKey;var y=Le();let I;y.__click=()=>t.onSizeChange(S());var w=a(y),A=a(w,!0);e(w);var F=n(w,2),z=a(F);e(F),e(y),M(D=>{I=Se(y,1,"bowl-size-option svelte-1ackfwc",null,I,{selected:t.selectedSize===S()}),v(A,D),v(z,`${S()??""}g`)},[()=>s()(q())]),j(P,y)}),e(b),e(_),M(P=>v(g,P),[()=>s()("bowlSize.title")]),j(i,_),le(),f()}ke(["click"]);var Ue=Q('<p class="capacity-message error svelte-12hs6nd"> </p>'),Xe=Q('<p class="capacity-message warning svelte-12hs6nd"> </p>'),Ye=Q('<p class="capacity-message svelte-12hs6nd"> </p>'),Ze=Q('<div class="capacity-section svelte-12hs6nd"><div class="capacity-header svelte-12hs6nd"><span class="capacity-label svelte-12hs6nd"> </span> <span class="capacity-values svelte-12hs6nd"> </span></div> <div class="capacity-bar svelte-12hs6nd"><div></div></div> <!></div>');function $e(i,t){se(t,!0);const s=()=>ve(ne,"$_",x),[x,f]=ce(),l=E(()=>t.bowlSize-t.currentWeight),_=E(()=>r(l)<0),d=E(()=>r(l)>=0&&r(l)<50),g=E(()=>Math.min(t.currentWeight/t.bowlSize*100,100));var b=Ze(),P=a(b),k=a(P),S=a(k,!0);e(k);var q=n(k,2),y=a(q);e(q),e(P);var I=n(P,2),w=a(I);let A;e(I);var F=n(I,2);{var z=p=>{var G=Ue(),T=a(G,!0);e(G),M(B=>v(T,B),[()=>s()("capacity.exceeded",{values:{amount:Math.abs(r(l)).toFixed(0)}})]),j(p,G)},D=p=>{var G=Ce(),T=We(G);{var B=o=>{var u=Xe(),h=a(u,!0);e(u),M(K=>v(h,K),[()=>s()("capacity.onlyRemaining",{values:{amount:r(l).toFixed(0)}})]),j(o,u)},V=o=>{var u=Ye(),h=a(u,!0);e(u),M(K=>v(h,K),[()=>s()("capacity.remaining",{values:{amount:r(l).toFixed(0)}})]),j(o,u)};ie(T,o=>{r(d)?o(B):o(V,!1)},!0)}j(p,G)};ie(F,p=>{r(_)?p(z):p(D,!1)})}e(b),M((p,G)=>{v(S,p),v(y,`${G??""}g / ${t.bowlSize??""}g`),A=Se(w,1,"capacity-fill svelte-12hs6nd",null,A,{warning:r(d),exceeded:r(_)}),Ie(w,`width: ${r(g)??""}%`)},[()=>s()("capacity.title"),()=>t.currentWeight.toFixed(0)]),j(i,b),le(),f()}var ea=Q('<section class="nutritional-summary svelte-1c9a0kl"><h2 class="svelte-1c9a0kl"> </h2> <!> <div class="nutrition-grid svelte-1c9a0kl"><div class="nutrition-item highlight svelte-1c9a0kl"><span class="label svelte-1c9a0kl"> </span> <span class="value svelte-1c9a0kl"> </span></div> <div class="nutrition-item highlight svelte-1c9a0kl"><span class="label svelte-1c9a0kl"> </span> <span class="value svelte-1c9a0kl"> </span></div> <div class="nutrition-item svelte-1c9a0kl"><span class="label svelte-1c9a0kl"> </span> <span class="value svelte-1c9a0kl"> </span></div> <div class="nutrition-item svelte-1c9a0kl"><span class="label svelte-1c9a0kl"> </span> <span class="value svelte-1c9a0kl"> </span></div> <div class="nutrition-item svelte-1c9a0kl"><span class="label svelte-1c9a0kl"> </span> <span class="value svelte-1c9a0kl"> </span></div> <div class="nutrition-item svelte-1c9a0kl"><span class="label svelte-1c9a0kl"> </span> <span class="value svelte-1c9a0kl"> </span></div></div></section>');function aa(i,t){se(t,!0);const s=()=>ve(ne,"$_",x),[x,f]=ce();var l=ea(),_=a(l),d=a(_,!0);e(_);var g=n(_,2);{var b=m=>{$e(m,{get currentWeight(){return t.nutrition.totalWeightG},get bowlSize(){return t.bowlSize}})};ie(g,m=>{t.bowlSize&&m(b)})}var P=n(g,2),k=a(P),S=a(k),q=a(S,!0);e(S);var y=n(S,2),I=a(y);e(y),e(k);var w=n(k,2),A=a(w),F=a(A,!0);e(A);var z=n(A,2),D=a(z,!0);e(z),e(w);var p=n(w,2),G=a(p),T=a(G,!0);e(G);var B=n(G,2),V=a(B);e(B),e(p);var o=n(p,2),u=a(o),h=a(u,!0);e(u);var K=n(u,2),L=a(K);e(K),e(o);var H=n(o,2),N=a(H),X=a(N,!0);e(N);var Y=n(N,2),ae=a(Y);e(Y),e(H);var R=n(H,2),U=a(R),ee=a(U,!0);e(U);var oe=n(U,2),c=a(oe);e(oe),e(R),e(P),e(l),M((m,C,O,W,Z,$,ge,ue,te,J,be,me,_e)=>{v(d,m),v(q,C),v(I,`${O??""}g`),v(F,W),v(D,Z),v(T,$),v(V,`${ge??""}g`),v(h,ue),v(L,`${te??""}g`),v(X,J),v(ae,`${be??""}g`),v(ee,me),v(c,`${_e??""}g`)},[()=>s()("nutrition.title"),()=>s()("nutrition.totalWeight"),()=>t.nutrition.totalWeightG.toFixed(0),()=>s()("nutrition.calories"),()=>t.nutrition.calories.toFixed(0),()=>s()("nutrition.protein"),()=>t.nutrition.proteinG.toFixed(1),()=>s()("nutrition.carbs"),()=>t.nutrition.carbsG.toFixed(1),()=>s()("nutrition.fat"),()=>t.nutrition.fatG.toFixed(1),()=>s()("nutrition.fiber"),()=>t.nutrition.fiberG.toFixed(1)]),j(i,l),le(),f()}var ta=Q('<div class="category-group svelte-1uha8ag"><h3 class="svelte-1uha8ag"> </h3> <div class="ingredient-grid svelte-1uha8ag"></div></div>'),ra=Q('<main class="svelte-1uha8ag"><h1 class="svelte-1uha8ag"> </h1> <p class="subtitle svelte-1uha8ag"> </p> <div class="form-container svelte-1uha8ag"><section class="customer-info svelte-1uha8ag"><h2 class="svelte-1uha8ag"> </h2> <div class="input-group svelte-1uha8ag"><label for="customer-name" class="svelte-1uha8ag"> </label> <input id="customer-name" type="text" required class="svelte-1uha8ag"/></div></section> <!> <section class="ingredient-selection svelte-1uha8ag"><h2 class="svelte-1uha8ag"> </h2> <!></section> <!> <div class="submit-section svelte-1uha8ag"><button class="submit-button svelte-1uha8ag"> </button></div></div></main>');function oa(i,t){se(t,!0);const s=()=>ve(ne,"$_",x),[x,f]=ce(),l=[{id:1,name:"Chicken",category:"protein",caloriesPer100g:165,proteinGPer100g:31,carbsGPer100g:0,fatGPer100g:3.7,fiberGPer100g:0,available:!0,displayOrder:1},{id:2,name:"Salmon",category:"protein",caloriesPer100g:208,proteinGPer100g:20,carbsGPer100g:0,fatGPer100g:13,fiberGPer100g:0,available:!0,displayOrder:2},{id:3,name:"Rice",category:"base",caloriesPer100g:130,proteinGPer100g:2.6,carbsGPer100g:28,fatGPer100g:.2,fiberGPer100g:.3,available:!0,displayOrder:1},{id:4,name:"Quinoa",category:"base",caloriesPer100g:120,proteinGPer100g:4.3,carbsGPer100g:21,fatGPer100g:1.8,fiberGPer100g:1.3,available:!0,displayOrder:2},{id:5,name:"Cherry Tomatoes",category:"vegetable",caloriesPer100g:18,proteinGPer100g:.9,carbsGPer100g:3.9,fatGPer100g:.2,fiberGPer100g:1.2,available:!0,displayOrder:1},{id:6,name:"Mango",category:"vegetable",caloriesPer100g:60,proteinGPer100g:.5,carbsGPer100g:15,fatGPer100g:.2,fiberGPer100g:1.7,available:!0,displayOrder:2},{id:7,name:"Carrot",category:"vegetable",caloriesPer100g:41,proteinGPer100g:.9,carbsGPer100g:9.5,fatGPer100g:.2,fiberGPer100g:2.8,available:!0,displayOrder:3},{id:8,name:"Onion",category:"vegetable",caloriesPer100g:40,proteinGPer100g:1.1,carbsGPer100g:9.3,fatGPer100g:.1,fiberGPer100g:1,available:!0,displayOrder:4},{id:9,name:"Avocado",category:"vegetable",caloriesPer100g:160,proteinGPer100g:2,carbsGPer100g:.9,fatGPer100g:15,fiberGPer100g:6.7,available:!0,displayOrder:5},{id:10,name:"Corn",category:"vegetable",caloriesPer100g:96,proteinGPer100g:3.2,carbsGPer100g:21,fatGPer100g:1.5,fiberGPer100g:2.6,available:!0,displayOrder:6},{id:11,name:"Cucumber",category:"vegetable",caloriesPer100g:16,proteinGPer100g:.7,carbsGPer100g:3.6,fatGPer100g:.1,fiberGPer100g:.5,available:!0,displayOrder:7},{id:12,name:"Mozzarella",category:"topping",caloriesPer100g:300,proteinGPer100g:20,carbsGPer100g:1,fatGPer100g:18,fiberGPer100g:0,available:!0,displayOrder:1},{id:13,name:"Green Onion",category:"topping",caloriesPer100g:32,proteinGPer100g:.9,carbsGPer100g:7.4,fatGPer100g:.05,fiberGPer100g:.8,available:!0,displayOrder:2},{id:14,name:"Peanuts",category:"topping",caloriesPer100g:600,proteinGPer100g:25,carbsGPer100g:16,fatGPer100g:52,fiberGPer100g:10,available:!0,displayOrder:3},{id:15,name:"Teriyaki",category:"dressing",caloriesPer100g:89,proteinGPer100g:6,carbsGPer100g:16,fatGPer100g:0,fiberGPer100g:0,available:!0,displayOrder:1},{id:16,name:"Olive Oil Balsamic",category:"dressing",caloriesPer100g:415,proteinGPer100g:0,carbsGPer100g:8.5,fatGPer100g:45.5,fiberGPer100g:0,available:!0,displayOrder:2}],_=E(()=>{const c={};return l.forEach(m=>{c[m.category]||(c[m.category]=[]),c[m.category].push(m)}),c});let d=fe(""),g=fe(null),b=fe(Ee(new Map));const P=E(()=>{let c={calories:0,proteinG:0,carbsG:0,fatG:0,fiberG:0,totalWeightG:0};return r(b).forEach((m,C)=>{const O=l.find(W=>W.id===C);if(O&&m>0){const W=m/100;c.calories+=O.caloriesPer100g*W,c.proteinG+=O.proteinGPer100g*W,c.carbsG+=O.carbsGPer100g*W,c.fatG+=O.fatGPer100g*W,c.fiberG+=(O.fiberGPer100g||0)*W,c.totalWeightG+=m}}),c}),k=E(()=>r(g)?r(g)-r(P).totalWeightG:null),S=E(()=>r(k)!==null&&r(k)<0),q=E(()=>r(d).trim().length>0&&r(g)!==null&&r(b).size>0&&!r(S));function y(c,m){const C=new Map(r(b));m>0?C.set(c,m):C.delete(c),he(b,C,!0)}async function I(){if(!r(q)||!r(g))return;const c=[];r(b).forEach((C,O)=>{c.push({ingredientId:O,quantityGrams:C})});const m={customerName:r(d),bowlSize:r(g),items:c};console.log("Submitting order:",m),alert(s()("order.submitted",{values:{name:r(d),size:r(g),weight:r(P).totalWeightG.toFixed(0),calories:r(P).calories.toFixed(0)}}))}function w(c){return s()(`ingredients.categories.${c}`)}function A(c){return s()(`ingredients.names.${c}`)}var F=ra(),z=a(F),D=a(z,!0);e(z);var p=n(z,2),G=a(p,!0);e(p);var T=n(p,2),B=a(T),V=a(B),o=a(V,!0);e(V);var u=n(V,2),h=a(u),K=a(h,!0);e(h);var L=n(h,2);we(L),e(u),e(B);var H=n(B,2);Je(H,{get selectedSize(){return r(g)},onSizeChange:c=>he(g,c,!0)});var N=n(H,2),X=a(N),Y=a(X,!0);e(X);var ae=n(X,2);Ge(ae,17,()=>Object.entries(r(_)),xe,(c,m)=>{var C=E(()=>Me(r(m),2));let O=()=>r(C)[0],W=()=>r(C)[1];var Z=ta(),$=a(Z),ge=a($,!0);e($);var ue=n($,2);Ge(ue,21,W,xe,(te,J)=>{{let be=E(()=>A(r(J).name)),me=E(()=>r(b).has(r(J).id)),_e=E(()=>r(b).get(r(J).id)||0);Ve(te,{get ingredient(){return r(J)},get ingredientName(){return r(be)},get isSelected(){return r(me)},get quantity(){return r(_e)},onSelect:()=>y(r(J).id,50),onRemove:()=>y(r(J).id,0),onQuantityChange:ze=>y(r(J).id,ze)})}}),e(ue),e(Z),M(te=>v(ge,te),[()=>w(O())]),j(c,Z)}),e(N);var R=n(N,2);aa(R,{get nutrition(){return r(P)},get bowlSize(){return r(g)}});var U=n(R,2),ee=a(U);ee.__click=I;var oe=a(ee,!0);e(ee),e(U),e(T),e(F),M((c,m,C,O,W,Z,$)=>{v(D,c),v(G,m),v(o,C),v(K,O),de(L,"placeholder",W),v(Y,Z),ee.disabled=!r(q),v(oe,$)},[()=>s()("app.title"),()=>s()("app.subtitle"),()=>s()("customerInfo.title"),()=>s()("customerInfo.nameLabel"),()=>s()("customerInfo.namePlaceholder"),()=>s()("ingredients.title"),()=>s()("order.submit")]),Be(L,()=>r(d),c=>he(d,c)),j(i,F),le(),f()}ke(["click"]);export{oa as component};
